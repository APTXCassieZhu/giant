<template>
  <div>
    <TopNavigation style="position:relative; height: 140px;"></TopNavigation>
   
    <section class="resource-detail">
      <div class="resource-detail-t">
        <div class="resource-detail-t-topwrap">
          <div class="resource-detail-lightbox"> 
            <div class="swiper-container gallery-top" ref="gallery-top">
              <div class="swiper-wrapper">
                <div class="swiper-slide" style="background-image:url(//timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1572500092263&di=fb3951d60188836031fc753b9fc0b1e1&imgtype=0&src=http%3A%2F%2Fi0.hdslb.com%2Fbfs%2Farticle%2F16b0b51f76966da6e2ea9d5239a5098594f4e99a.jpg)"></div>
                <div class="swiper-slide" style="background-image:url(//timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1572500092263&di=fb3951d60188836031fc753b9fc0b1e1&imgtype=0&src=http%3A%2F%2Fi0.hdslb.com%2Fbfs%2Farticle%2F16b0b51f76966da6e2ea9d5239a5098594f4e99a.jpg)"></div>
                <div class="swiper-slide" style="background-image:url(//timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1572951374068&di=32d7b2f0241ab23ea61488baf6ddfaff&imgtype=0&src=http%3A%2F%2Fww1.sinaimg.cn%2Flarge%2F46070b07gw1eqdiqw4hylj20xc0gogo5.jpg)"></div>
                <div class="swiper-slide" style="background-image:url(//timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1572500092263&di=fb3951d60188836031fc753b9fc0b1e1&imgtype=0&src=http%3A%2F%2Fi0.hdslb.com%2Fbfs%2Farticle%2F16b0b51f76966da6e2ea9d5239a5098594f4e99a.jpg)"></div>
                <div class="swiper-slide" style="background-image:url(//timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1572951415743&di=38754c8f774e83c4e276bf8631e7452a&imgtype=jpg&src=http%3A%2F%2Fimg4.imgtn.bdimg.com%2Fit%2Fu%3D1468004494%2C3374529979%26fm%3D214%26gp%3D0.jpg)"></div>
                <div class="swiper-slide" style="background-image:url(//timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1572500092263&di=fb3951d60188836031fc753b9fc0b1e1&imgtype=0&src=http%3A%2F%2Fi0.hdslb.com%2Fbfs%2Farticle%2F16b0b51f76966da6e2ea9d5239a5098594f4e99a.jpg)"></div>
                <div class="swiper-slide" style="background-image:url(//timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1572500092263&di=fb3951d60188836031fc753b9fc0b1e1&imgtype=0&src=http%3A%2F%2Fi0.hdslb.com%2Fbfs%2Farticle%2F16b0b51f76966da6e2ea9d5239a5098594f4e99a.jpg)"></div>
                <div class="swiper-slide" style="background-image:url(//timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1572500092263&di=fb3951d60188836031fc753b9fc0b1e1&imgtype=0&src=http%3A%2F%2Fi0.hdslb.com%2Fbfs%2Farticle%2F16b0b51f76966da6e2ea9d5239a5098594f4e99a.jpg)"></div>
                <div class="swiper-slide" style="background-image:url(//timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1572500092263&di=fb3951d60188836031fc753b9fc0b1e1&imgtype=0&src=http%3A%2F%2Fi0.hdslb.com%2Fbfs%2Farticle%2F16b0b51f76966da6e2ea9d5239a5098594f4e99a.jpg)"></div>
                <div class="swiper-slide" style="background-image:url(//timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1572500092263&di=fb3951d60188836031fc753b9fc0b1e1&imgtype=0&src=http%3A%2F%2Fi0.hdslb.com%2Fbfs%2Farticle%2F16b0b51f76966da6e2ea9d5239a5098594f4e99a.jpg)"></div>
              </div>
              <div class="swiper-button-next swiper-button-white"></div>
              <div class="swiper-button-prev swiper-button-white"></div>
            </div>
            <div class="swiper-container gallery-thumbs" ref="gallery-thumbs">
              <div class="swiper-wrapper">
                <div class="swiper-slide" style="background-image:url(//timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1572500092263&di=fb3951d60188836031fc753b9fc0b1e1&imgtype=0&src=http%3A%2F%2Fi0.hdslb.com%2Fbfs%2Farticle%2F16b0b51f76966da6e2ea9d5239a5098594f4e99a.jpg)"></div>
                <div class="swiper-slide" style="background-image:url(//timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1572951722265&di=6ae8c5212af12bbcd4bd5c30aed0fe9a&imgtype=0&src=http%3A%2F%2Fgss0.baidu.com%2F-fo3dSag_xI4khGko9WTAnF6hhy%2Fzhidao%2Fpic%2Fitem%2F472309f790529822ccae72b0d5ca7bcb0a46d420.jpg)"></div>
                <div class="swiper-slide" style="background-image:url(//timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1572500092263&di=fb3951d60188836031fc753b9fc0b1e1&imgtype=0&src=http%3A%2F%2Fi0.hdslb.com%2Fbfs%2Farticle%2F16b0b51f76966da6e2ea9d5239a5098594f4e99a.jpg)"></div>
                <div class="swiper-slide" style="background-image:url(//timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1572500092263&di=fb3951d60188836031fc753b9fc0b1e1&imgtype=0&src=http%3A%2F%2Fi0.hdslb.com%2Fbfs%2Farticle%2F16b0b51f76966da6e2ea9d5239a5098594f4e99a.jpg)"></div>
                <div class="swiper-slide" style="background-image:url(//timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1572500092263&di=fb3951d60188836031fc753b9fc0b1e1&imgtype=0&src=http%3A%2F%2Fi0.hdslb.com%2Fbfs%2Farticle%2F16b0b51f76966da6e2ea9d5239a5098594f4e99a.jpg)"></div>
                <div class="swiper-slide" style="background-image:url(//timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1572500092263&di=fb3951d60188836031fc753b9fc0b1e1&imgtype=0&src=http%3A%2F%2Fi0.hdslb.com%2Fbfs%2Farticle%2F16b0b51f76966da6e2ea9d5239a5098594f4e99a.jpg)"></div>
                <div class="swiper-slide" style="background-image:url(//timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1572500092263&di=fb3951d60188836031fc753b9fc0b1e1&imgtype=0&src=http%3A%2F%2Fi0.hdslb.com%2Fbfs%2Farticle%2F16b0b51f76966da6e2ea9d5239a5098594f4e99a.jpg)"></div>
                <div class="swiper-slide" style="background-image:url(//timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1572500092263&di=fb3951d60188836031fc753b9fc0b1e1&imgtype=0&src=http%3A%2F%2Fi0.hdslb.com%2Fbfs%2Farticle%2F16b0b51f76966da6e2ea9d5239a5098594f4e99a.jpg)"></div>
                <div class="swiper-slide" style="background-image:url(//timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1572500092263&di=fb3951d60188836031fc753b9fc0b1e1&imgtype=0&src=http%3A%2F%2Fi0.hdslb.com%2Fbfs%2Farticle%2F16b0b51f76966da6e2ea9d5239a5098594f4e99a.jpg)"></div>
                <div class="swiper-slide" style="background-image:url(//timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1572951768114&di=a4822fbaa2718bd407e26080c3106b7f&imgtype=0&src=http%3A%2F%2Fpic1.win4000.com%2Fwallpaper%2F4%2F542a57eb5c816.jpg)"></div>
              </div>
            </div>

          </div>
          <div class="resource-detail-deslist">
            <div class="resource-detail-deslist-part1">
              <!-- <a-avatar size="small" style="backgroundColor:#87d068" icon="user" /> -->
              
              <!-- <font-awesome-icon :type="['fas','user-circle']"></font-awesome-icon> -->
              <font-awesome-icon :icon="['fas','user-circle']" style="color:#37d89d;width:23px;height:23px;"/>
              <span>前沿技术部</span>
            </div>
            <div class="resource-detail-deslist-part2">天空贴图的标题</div>
            <div class="resource-detail-deslist-part3">
              <!-- <a-select defaultValue="ver 1.2.3" style="width: 120px">
                <a-select-option value="v1">ver 1.2.3</a-select-option>
                <a-select-option value="v2">ver 2.3.3</a-select-option>
                <a-select-option value="v3">ver 3.0.3</a-select-option>
              </a-select> -->
              <Select v-model="def_ver" style="width: 120px">
                <Option value="v1">ver 1.2.3</Option>
                <Option value="v2">ver 2.3.3</Option>
                <Option value="v3">ver 3.0.3</Option>
              </Select>
              <span class="resource-detail-deslist-updatetime"> - Last Update:2019-7-29</span>
            </div>
            <div  class="resource-detail-deslist-part4">
              <div class="resource-detail-deslist-score-wrap">
                <!-- <Rate v-model="rate1" disabled/><span class="resource-detail-deslist-score">{{rate1+'.0'}}</span> -->
                <a-rate disabled v-model="rate1" /><span class="resource-detail-deslist-score">{{rate1+'.0'}}</span>
              </div>
              <div>25条评分</div> 
              <div>137条评论</div>  
            </div>
            <div class="resource-detail-deslist-part5">
              <div>
                <!-- <a-icon type="folder" theme="twoTone" twoToneColor="#1ebf73"/>  -->
                <font-awesome-icon :icon="['fas','folder']" style="color:#1ebf73;width:15px;height:15px;"/>
                <span>资源包</span> 
              </div>
              <div>天空贴图的标题</div>
            </div>
            <div class="resource-detail-deslist-part6">
              <div>
                <font-awesome-icon :icon="['fas','cog']" style="color:#1ebf73;width:15px;height:15px;"/>
                <!-- <a-icon type="setting" theme="twoTone" twoToneColor="#1ebf73"/>   -->
                <span>可运行的引擎版本</span> 
               </div>
              <div>Unity 4.2 - 4.8</div>
            </div>
            <div  class="resource-detail-deslist-part7">
              <div>
                <!-- <a-icon type="tag" theme="twoTone" twoToneColor="#1ebf73"/>  -->
                <font-awesome-icon :icon="['fas','tags']" style="color:#1ebf73;width:15px;height:15px;"/>
                <span>资源标签</span> 
              </div>
              <div>
                <Tag size="medium">模型33322</Tag>
                <Tag size="medium">模型</Tag>
                <Tag size="medium">模型22222</Tag>
                <Tag size="medium">模型22</Tag>
                <Tag size="medium">模型33</Tag>
                <Tag size="medium">模型4424</Tag>
                <Tag size="medium">模型11</Tag>
                <Tag size="medium">模型33</Tag>
                <Tag size="medium">模型4424</Tag>
                <Tag size="medium">模型11</Tag>
              </div>
            </div>
            <div class="resource-detail-deslist-part8">
              <div class="resource-detail-deslist-like" @click="handleLike">
                <!-- <a-icon type="heart" />&nbsp;关注 -->
                <font-awesome-icon :icon="['fas','heart']" style="color:#1ebf73;width:15px;height:15px;"/>&nbsp;关注
              </div>
              <div class="resource-detail-deslist-down" @click="handleDown">下载资源（512MB）</div>
            </div>
          </div>
        </div>
        <div class="resource-detail-des">
          <div>资源描述</div>
          <div>
            <input type="checkbox" id="resource-detail-des-more">
            <div class="resource-detail-des-content">
              主要特性xxxxxxxxx主要特性xxxxxxxxx主要特性xxxxxxxxx主要特性xxxxxxxxx主要特性xxxxxxxxx主要特性xxxxxxxxx主要特性xxxxxxxxx主要特性xxxxxxxxx主要特性xxxxxxxxx主要特性xxxxxxxxx主要特性xxxxxxxxx主要特性xxxxxxxxx主要特性xxxxxxxxx<br/>
              包含的内容<br/>
              xxxxxx包含的内容<br/>
              包含的内容<br/>
              xxxxxx包含的内容<br/>
              包含的内容<br/>
              xxxxxx包含的内容<br/>
              包含的内容<br/>
              xxxxxx包含的内容<br/>
               xxxxxx包含的内容<br/>
              包含的内容<br/>
              xxxxxx包含的内容<br/>
              包含的内容<br/>
              xxxxxx包含的内容<br/>
               xxxxxx包含的内容<br/>
              包含的内容<br/>
              xxxxxx包含的内容<br/>
              包含的内容<br/>
              xxxxxx包含的内容<br/>
            </div>
            <p>
              
              <span class="resource-detail-des-caret-down" style="cursor:pointer;text-align:center;"> 
                <label for="resource-detail-des-more">展开</label>
                <span style="color:#1ebf73"><font-awesome-icon :icon="['fas','caret-down']"/></span>
              </span>
              <span class="resource-detail-des-caret-up" style="cursor:pointer;text-align:center;"> 
                <label for="resource-detail-des-more">收起</label>
                <span style="color:#1ebf73"><font-awesome-icon :icon="['fas','caret-up']"/></span>
              </span>
             
            </p>
          </div>
        </div>
      </div>
      <div class="resource-detail-b" style="margin:10px 0;">
       
        <div  class="resource-detail-b-bar">
          <div>
            <span>137条评论</span> 
            <span>仅显示20条评论</span>
          </div>   
          <!-- <a-dropdown :trigger="['click']">
            <span class="ant-dropdown-link" > {{sortBy==='time'?'按时间排序':'按热度排序'}} <a-icon type="down" /> </span>
            <a-menu slot="overlay">
              <a-menu-item key="time" @click="dpClick">
                <span>按时间排序</span>
              </a-menu-item>
              <a-menu-item key="hot"  @click="dpClick">
                <span>按热度排序</span>
              </a-menu-item>
              <a-menu-divider />
            </a-menu>
          </a-dropdown> -->
        <Dropdown trigger="click" style="margin-right:10px;cursor:pointer;" >
          <span > {{sortBy==='time'?'按时间排序':'按热度排序'}} <Icon type="ios-arrow-down"></Icon> </span>
          <DropdownMenu slot="list" @click="dpClick">
              <DropdownItem>按时间排序</DropdownItem>
              <DropdownItem>按热度排序</DropdownItem>
          </DropdownMenu>
        </Dropdown>
        </div>
        <Alert show-icon closable>您需要写评论才能评分哦</Alert>
        <Alert show-icon closable>您需要评分才可以发表评论哦</Alert>
       
        <div class="resource-detail-rate-wrap" > 
          <a-rate v-model="rate2" size="large" :tooltips="['差', '较差', '还行', '推荐', '力荐']" @change="handleRate" />
          <!-- <Rate v-model="rate2" size="large" :tooltips="['差', '较差', '还行', '推荐', '力荐']" @change="handleRate" /> -->
          <span class="resource-detail-rate-text">{{rate2+'.0'}}</span>
        </div>
        <div class="resource-detail-reply" ref="resource-detail-reply">

        </div>
        <div class="resource-detail-comments"  ref="resource-detail-comments">

        </div>
        <div class="resource-detail-comments-btn-wrap">
          <Button style="color:#1ebf73;" size="large">查看所有评论</Button>
        </div>
      </div>
    </section>
     <Footer style="position:relative;"></Footer>
  </div>
</template>
<style lang="less">

.resource-detail-b-bar{
  // .ant-select-selection{
  //   background:transparent;
  // }
  // .ant-select-disabled .ant-select-selection:hover,
  // .ant-select-disabled .ant-select-selection:focus,
  // .ant-select-disabled .ant-select-selection:active {
  //   border-color: transparent;
  //   box-shadow: none;
  // }
  // .ant-dropdown-link{
  //   margin-right:15px;
  //   cursor: pointer;
  //   color:#7f7f7f;
  //   font-size:16px;
  // }
}

</style>
<style>

    .swiper-container {
      width: 100%;
      height: 300px;
      margin-left: auto;
      margin-right: auto;
    }
    .swiper-slide {
      background-size: cover;
      background-position: center;
    }
    .gallery-top {
      height: 80%;
      width: 100%;
    }
    .gallery-thumbs {
      height: 20%;
      box-sizing: border-box;
      padding-top:10px;
    }
    .gallery-thumbs .swiper-slide {
      height: 100%;
      opacity: 0.4;
    }
    .gallery-thumbs .swiper-slide-thumb-active {
      opacity: 1;
    }
</style>
<style scoped lang="less">

.resource-detail{
  // width:95%;
  width:100%;
  max-width:1380px;
  margin:0 auto;
  margin-top:50px;
  position: relative;

  .ivu-tag{
    margin-right: 10px;
    margin-bottom: 10px;
    margin-top:5px;
  }

  &-t{
    
  }

  &-des-content{  
    overflow: hidden;
    height: 200px;
  }

  &-des{
    // border:1px solid blue;
    margin-top:30px;

    

    >div:nth-child(1){
      font-size:21px;
      font-weight: bold;
      color:#262626;
      margin:10px 0;
    }
    >div:nth-child(2){
      color:#7f7f7f;
      font-size:16px;


      input[type='checkbox']{
        display:none;
      }
      input[type='checkbox']:checked+div{
        overflow: hidden;
        height:auto;
      }
      input[type='checkbox']:checked ~ p .resource-detail-des-caret-down{
        display:none;
      }
      input[type='checkbox']:checked ~ p .resource-detail-des-caret-up{
        display:block;
      }

      .resource-detail-des-caret-up{
        display:none;
      }

      p{
        text-align: center;

      }
      label{
        margin:0 auto;
        cursor: pointer;
        color:#1ebf73;
        font-size:18px;
      }
      
    }
  }
  &-deslist{
    position: relative;
  }
  &-deslist-updatetime{
    display: block;
    margin-left:10px;
  }
  &-deslist-score{
    color:#f7b500;
    font-size:18px;
    display: block;
    padding-top:4px;
  }
  &-deslist-score-wrap{
    display: flex;
    align-items: center;
  }

  &-lightbox{
    width:812px;
    height:577px;
    // border:1px solid #ddd;
  }
  &-lightbox>img{
    width:80%;
  }

  &-deslist-part1{
    display: flex;
    align-items: center;
    
  }
  &-deslist-part1>span:nth-child(2){
    margin-left:10px;
  }
  &-deslist-part2{
    display: flex;
    font-size:24px;
    font-weight: bold;
    color:black;
    margin-top:10px;
  }
  &-deslist-part3{
    display: flex;
    align-items: center;
    font-size:16px;
    margin-top:10px;
  }
  
  
  &-deslist-part4{
    display: flex;
    font-size:16px;
    align-items: center;
    padding-bottom: 26px;
    border-bottom: 1px solid #eaeaea;
    margin-top:10px;
  }
  &-deslist-part4>div:nth-child(2){
    margin-left:20px;
    margin-top:3px;
    text-decoration: underline;
    cursor: pointer;
  }
  &-deslist-part4>div:nth-child(3){
    margin-left:10px;
    margin-top:3px;
    text-decoration: underline;
    cursor: pointer;
   
  }

  &-deslist-part5{
    font-size:16px;
    margin:10px 0;
    margin-top:37px;

    >div:nth-child(1){
      color:#262626;
      font-weight: bold;
    }
    >div:nth-child(2){
      padding-left:21px;
      margin:7px 0;
    }
  }

  &-deslist-part6{
    font-size:16px;
    margin:10px 0;
    >div:nth-child(1){
      color:#262626;
      font-weight: bold;

    }
    >div:nth-child(2){
      padding-left:21px;
      margin:7px 0;
    }
  }
  &-deslist-part7{
    font-size:16px;
    margin:10px 0;
    >div:nth-child(1){
      color:#262626;
      font-weight: bold;
      span{
        padding-left:1px;
      }
    }
    >div:nth-child(2){
      padding-left:21px;
      margin:7px 0;
    }
    .ant-tag{
      margin-bottom:10px;
    }
  }
  &-deslist-part8{
    display: flex;
    width: 100%;
    padding-left: 27px;
    justify-content: space-around;
    position: absolute;
    left:0;
    bottom:0;
  }

//   resource-detail-deslist-like
// resource-detail-deslist-down

  &-deslist-like{
    @co:#1ebf73;
    width:148px;
    height:45px;
    background:#ddefe7;
    color:@co;
    border-radius: 3px;
    font-size:18px;
    border:1px solid @co;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor:pointer;
  }
  &-deslist-down{
    width:285px;
    height:45px;
    background:#1ebf73;
    border-radius: 3px;
    font-size:18px;
    color:white;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor:pointer;
  }

  &-deslist{
    display: flex;
    flex:1;
    box-sizing: border-box;
    padding-left:40px;
    // border:1px solid teal;
    flex-direction: column;
    color:#7f7f7f;
  }
  &-t-topwrap{
    display: flex;
    >div{
      box-sizing: border-box;
    }
  }

  &-b{
    
    .ant-alert{
      margin:6px 0;
    }
  }

  &-reply{
    width:1224px;
    margin:0 auto;
  }
  &-comments{
    width:1224px;
    margin:0 auto;
  }

  &-rate-wrap{
    display: flex;
    align-items: center;
    justify-content: center;
    margin:30px 0;
    transform:scale(1.5);
  }
  &-rate-text{
    color:#f7b500;
    font-size:30px;
    margin-left:3px;
  }
  &-comments-btn-wrap{
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 70px 0;
  }


  .ant-select-selection{
    // background-color:transparent;
    // border:0px solid transparent;
    // font-size:16px;
    // color:#7f7f7f;

    border:1px solid teal;
  }


  &-b-bar{
    background-color:#ececec;
    height:48px;
    display:flex;
    align-items: center;
    justify-content: space-between;
    margin-top:30px;
    margin-bottom:10px;


    >div:nth-child(1){
      >span{
        padding-left:15px;
      }
      >span:nth-child(1){
        font-size:24px;
        color:#262626;
        font-weight: bold;
      }
      
      >span:nth-child(2){
        font-size:14px;
        color:#7f7f7f;
      }
    }
  }
}
</style>
<script>
import TopNavigation from '../components/TopNav.vue'
import moment from 'moment'
import Footer from '../components/footer.vue'
import axios from 'axios'


// import Rate from 'ant-design-vue/lib/rate';
// import 'ant-design-vue/lib/rate/style'; // 或者 ant-design-vue/lib/button/style/css 加载 css 文件


// console.log('TopNavigation:', TopNavigation)
import E from '../widget/emojiReply/'

const {Reply,Comments} = E

export default {
  components:{TopNavigation,Footer},
  props:[],
  data(){
    return{
      comments: [],
      submitting: false,
      value: '',
      moment,
      rate1:3,
      rate2:0,
      sortBy:'time',

      def_ver:'ver 1.2.3'
    }

  },
  mounted(){

    // /resource/{id}  GET 资源详情

    // /resource/{id}/star  POST 关注资源
   
    // /user/describe   GET 拿到用户id（id）、头像(string)、昵称(nickname)、部门(dept)

    // /rate/:id  评分 POST 资源评分

    // /comment  GET  获取资源评论

    // /comment  POST 提交评论

    // /comment DEL 删除评论

    // ​/comment​/{id}​/star  POST 点赞评论

    const {params} = this.$route

    // axios.get(`/api/resource/1234`,{params:{  }}).then(response=>{
      
    // }).catch(err=>{

    // })

    axios.get('/api/user/describe').then(response_des=>{
      var res = response_des.data
      var userid = res.data.id
      console.log(userid,response_des)
      axios.get(`/api/comment`,{params:{ resourceId:params.resourceId,pageSize:20,order:'hot'}}).then(response=>{

        var res = response.data
          
        let items = []

        items = res.data.list.map(o=>{
          var item = {
            items:[],
            id:o.pid,
            content:o.content,
            score:o.rate.value,
            like:o.hot,
            liked:o.stars.length>1,
            time:o.createdAt ,
            replyUserId:o.replyUserId,
            user:{
              uid:o.user.id,
              name:o.user.name,
              nickname:o.user.nickName,
              imgurl:o.user.profilePic,
            }
          }
          item.items = o.items.map(o=>{  
            return{
              id: o.pid,
              content:o.content,
              like:o.hot,
              liked:o.stars.length>1,
              replyUserId:o.replyUserId,
              usera:{
                uid:o.user.id,name:o.user.name,nickname:o.user.nickName,imgurl:o.user.profilePic
              },
              userb:{
                uid:o.followUser.id,name:o.followUser.name,nickname:o.followUser.nickName,imgurl:o.followUser.profilePic
              },
              time:o.createdAt
            }
          })

          return item
        })

       
        //console.log(response)
        let comments = Comments(this.$refs['resource-detail-comments'],{
          items,
          userdata:{
            uid:userid
          }
        })

       
        comments.onLike(prop=>{
          console.log('comments like:', prop)

          if(prop.liked){
            axios.post(`/api/comment/${prop.id}/star`,{star:false}).then(response=>{
              comments.dislikeByProp(prop)
            })       


          }else{
            axios.post(`/api/comment/${prop.id}/star`,{star:true}).then(response=>{
              comments.likeByProp(prop)
            })
            
          }
        })

        comments.onReply(prop=>{
          // 	"pid": 0,
          // 	"content": "string",
          // 	"replyUserId": 0
          axios.post('/api/comment',{resourceId:params.resourceId,content:prop.content,pid:prop.id,replyUserId:prop.replyUserId}).then(response=>{
            
          })
          console.log('comments reply:', prop)
        })


        comments.onDel(prop=>{
          console.log('comments del:', prop)
          //comments.removeCommentByProp(prop)
          this.$Modal.confirm({
            title: '确认删除该条评论?',
            okText: '确认',
            okType: 'danger',
            cancelText: '取消',
            onOk: () => {
              
              axios.delete(`/api/comment/${prop.id}`,{pid:prop.id}).then(response=>{
                
                comments.removeCommentByProp(prop)
                setTimeout(()=>{
                  this.$Modal.success({
                    title: '评论已删除',
                    okText: '确认',
                  })
                },300)
              })
              
            }
          })
          
        })

      }).catch(err=>{
        
      })

      
    })
    


    Reply(this.$refs['resource-detail-reply'],{userdata:{}})
    .onSubmit(prop=>{
      console.log(prop)
    })

    // console.log(this.$routes)
  //  let comments = Comments(this.$refs['resource-detail-comments'],{
  //     items:[
  //       {
  //         id:'评论id',
  //         content:'xxxx评论内容aaaaaaa',
  //         user:{uid:'用户id',name:'name',nickname:'nickname',imgurl:'https://avatars2.githubusercontent.com/u/18524392?s=460&v=4'},
  //         score:'3.0',
  //         like:'1234',
  //         liked:true,
  //         time:'一天前',
  //         items:[
  //           {
  //             id:'评论id',
  //             content:'xxxx评论内容bbbbbb',
  //             usera:{uid:'用户id',name:'name',nickname:'nickname',imgurl:'https://avatars2.githubusercontent.com/u/18524392?s=460&v=4'},
  //             userb:{uid:'用户id',name:'name',nickname:'nickname',imgurl:'https://avatars2.githubusercontent.com/u/18524392?s=460&v=4'},
  //             like:'3333',
  //             liked:false,
  //             time:'一天前'
  //           },
  //           {
  //             id:'评论id',
  //             content:'xxxx评论内容cccccccccc',
  //             usera:{uid:'用户id',name:'name',nickname:'nickname',imgurl:'https://avatars2.githubusercontent.com/u/18524392?s=460&v=4'},
  //             userb:{uid:'用户id',name:'name',nickname:'nickname',imgurl:'https://avatars2.githubusercontent.com/u/18524392?s=460&v=4'},
  //             like:'33334',
  //             liked:false,
  //             time:'二天前'
  //           }
  //         ]
  //       },
  //       {
  //         id:'评论id',
  //         content:'xxxx评论内容',
  //         user:{uid:'uid-a',name:'name',nickname:'nickname',imgurl:'https://avatars2.githubusercontent.com/u/18524392?s=460&v=4'},
  //         score:'4.0',
  //         like:'1234',
  //         liked:false,
  //         time:'一天前',
  //         items:[
  //           {
  //             id:'评论id',
  //             content:'xxxx评论内容',
  //             usera:{uid:'用户id',name:'name',nickname:'nickname',imgurl:'https://avatars2.githubusercontent.com/u/18524392?s=460&v=4'},
  //             userb:{uid:'用户id',name:'name',nickname:'nickname',imgurl:'https://avatars2.githubusercontent.com/u/18524392?s=460&v=4'},
  //             like:'3333',
  //             time:'一天前'
  //           },
  //           {
  //             id:'评论id',
  //             content:'xxxx评论内容2',
  //             usera:{uid:'uid-a',name:'name',nickname:'nickname',imgurl:'https://avatars2.githubusercontent.com/u/18524392?s=460&v=4'},
  //             userb:{uid:'用户id',name:'name',nickname:'nickname',imgurl:'https://avatars2.githubusercontent.com/u/18524392?s=460&v=4'},
  //             like:'33334',
  //             time:'一天前'
  //           }
  //         ]
  //       }
  //     ],
  //     userdata:{
  //       uid:'uid-a'
  //     }
  //   })


    // var that = this
    // comments.onDel(prop=>{
    //   console.log('comments del:', prop)
    //   //comments.removeCommentByProp(prop)
    //   this.$Modal.confirm({
    //     title: '确认删除该条评论?',
    //     okText: '确认',
    //     okType: 'danger',
    //     cancelText: '取消',
    //     onOk: () => {
    //       comments.removeCommentByProp(prop)
    //       setTimeout(()=>{
    //         this.$Modal.success({
    //           title: '评论已删除',
    //           okText: '确认',
    //         })
    //       },300)
    //     }
    //   })
      
    // })
    

    // comments.onLike(prop=>{
    //   console.log('comments like:', prop)
    //   if(prop.liked){
    //     comments.dislikeByProp(prop)
    //   }else{
    //     comments.likeByProp(prop)
    //   }
    // })
    // comments.onReply(prop=>{
    //   console.log('comments reply:', prop)
    // })



  // // Initializes and creates emoji set from sprite sheet
    
  //   var emojiPicker = new EmojiPicker({
  //     emojiable_selector: '[data-emojiable=true]',
  //     assetsPath: './lib/img/',
  //     popupButtonClasses: 'fa fa-smile-o'
  //   })
  //   // Finds all elements with `emojiable_selector` and converts them to rich emoji input fields
  //   // You may want to delay this step if you have dynamically created input fields that appear later in the loading process
  //   // It can be called as many times as necessary; previously converted input fields will not be converted again
  //   emojiPicker.discover()


    setTimeout(()=>{

      //console.log(document.querySelector('.gallery-thumbs')  )

      var galleryThumbs = new Swiper('.gallery-thumbs', {
        spaceBetween: 10,
        slidesPerView: 4,
        freeMode: true,
        watchSlidesVisibility: true,
        watchSlidesProgress: true,
      })

      
      var galleryTop = new Swiper('.gallery-top', {
        spaceBetween: 10,
        navigation: {
          nextEl: '.swiper-button-next',
          prevEl: '.swiper-button-prev',
        },
        thumbs: {
          swiper: galleryThumbs
        }
      })

    },0)
    

  },
  methods:{
    handleLike(){
      // this.$message.success('已关注')
      this.$Message.success('已关注')
    },
    handleRate(v){

      //console.log('handleRate:',this.rate2,v)

    },
    dpClick(o){
      this.sortBy = o.key
    },
    handleDown(){
      
    }
  }
}
</script>